(()=>{var e={};e.id=85,e.ids=[85],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1613:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(7413),a=r(5358);function o(){return(0,s.jsx)("div",{className:"container mx-auto py-8",children:(0,s.jsx)(a.default,{})})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3614:(e,t,r)=>{"use strict";r.d(t,{default:()=>C});var s=r(687),a=r(3442),o=r(7605),n=r(3210),l=r(9523),i=r(1669),d=r(9667),c=r(4493),u=r(9867),p=r(6485),h=r(6475);h.callServer,h.findSourceMapURL;let m=(0,h.createServerReference)("402c124c2d05279790b9a3330d4293d2e299611f9b",h.callServer,void 0,h.findSourceMapURL,"sellProductAction");var x=r(3540),f=r(2614);let v=(0,f.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var j=r(3380),g=r(1516);let b=(0,f.A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),y=(0,f.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var w=r(4224),k=r(4780);let S=(0,w.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),N=n.forwardRef(({className:e,variant:t,...r},a)=>(0,s.jsx)("div",{ref:a,role:"alert",className:(0,k.cn)(S({variant:t}),e),...r}));N.displayName="Alert";let P=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h5",{ref:r,className:(0,k.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));P.displayName="AlertTitle";let A=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,k.cn)("text-sm [&_p]:leading-relaxed",e),...t}));function C(){let{toast:e}=(0,u.dj)(),[t,r]=(0,n.useTransition)(),[h,f]=(0,n.useState)(!1),[w,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(null),[_,T]=(0,n.useState)(!1),q=(0,o.mN)({resolver:(0,a.u)(p.b),defaultValues:{barcode:"",quantity:1}});return q.watch("barcode"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Zp,{className:"w-full max-w-xl mx-auto shadow-xl rounded-lg",children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsxs)(c.ZB,{className:"text-3xl font-headline text-primary flex items-center gap-2",children:[(0,s.jsx)(v,{className:"h-8 w-8"})," Sell Product"]}),(0,s.jsx)(c.BT,{children:"Scan or enter product barcode, then specify quantity to sell."})]}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)(i.lV,{...q,children:(0,s.jsxs)("form",{onSubmit:q.handleSubmit(function(t){if(!w)return void e({title:"Error",description:"No product selected. Please scan or enter a valid barcode.",variant:"destructive"});r(async()=>{let r=await m(t);r.success&&r.product?(e({title:"Success!",description:`${r.message} New stock for ${r.product.name}: ${r.product.currentStock}`}),k(r.product),q.reset({barcode:t.barcode,quantity:1})):(e({title:"Error",description:r.message||"Could not sell product.",variant:"destructive"}),r.errors&&r.errors.forEach(e=>{q.setError(e.path[0],{message:e.message})}))})}),className:"space-y-8",children:[(0,s.jsx)(i.zB,{control:q.control,name:"barcode",render:({field:e})=>(0,s.jsxs)(i.eI,{children:[(0,s.jsx)(i.lR,{children:"Product Barcode"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.MJ,{children:(0,s.jsx)(d.p,{placeholder:"Scan or enter barcode",...e})}),(0,s.jsxs)(l.$,{type:"button",variant:"outline",onClick:()=>f(!0),className:"shrink-0",children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"})," Scan"]})]}),_&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1 pt-1",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 animate-spin"})," Checking barcode..."]}),(0,s.jsx)(i.C5,{}),S&&!_&&(0,s.jsx)("p",{className:"text-sm font-medium text-destructive pt-1",children:S})]})}),w&&(0,s.jsxs)(N,{className:"bg-accent/20 border-accent/50 shadow-sm rounded-lg",children:[(0,s.jsx)(b,{className:"h-5 w-5 text-accent"}),(0,s.jsx)(P,{className:"font-headline text-accent",children:w.name}),(0,s.jsxs)(A,{children:["Current Stock: ",w.currentStock," | MRP: $",w.mrp.toFixed(2)," | Cost Code: ",w.costPriceCode]})]}),(0,s.jsx)(i.zB,{control:q.control,name:"quantity",render:({field:e})=>(0,s.jsxs)(i.eI,{children:[(0,s.jsx)(i.lR,{children:"Quantity"}),(0,s.jsx)(i.MJ,{children:(0,s.jsx)(d.p,{type:"number",step:"1",placeholder:"e.g., 1",...e})}),(0,s.jsx)(i.C5,{})]})}),(0,s.jsxs)(l.$,{type:"submit",disabled:t||!w||_,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground rounded-md shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:[t?(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Sell Product"]})]})})}),w&&w.currentStock<=w.lowInventoryFactor&&(0,s.jsx)(c.wL,{children:(0,s.jsxs)(N,{variant:"destructive",className:"w-full text-sm",children:[(0,s.jsx)(y,{className:"h-4 w-4"}),(0,s.jsx)(P,{children:"Low Stock Warning!"}),(0,s.jsx)(A,{children:"This product will be critically low or out of stock after this sale."})]})})]}),(0,s.jsx)(x.A,{open:h,onOpenChange:f,onScanComplete:e=>{q.setValue("barcode",e,{shouldValidate:!0})}})]})}A.displayName="AlertDescription"},3873:e=>{"use strict";e.exports=require("path")},4896:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(5239),a=r(8088),o=r(8170),n=r.n(o),l=r(893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d={children:["",{children:["sell-product",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1613)),"/home/justdial/ThokWaliShop/Thok-wali-Shop/src/app/sell-product/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6424)),"/home/justdial/ThokWaliShop/Thok-wali-Shop/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/justdial/ThokWaliShop/Thok-wali-Shop/src/app/sell-product/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/sell-product/page",pathname:"/sell-product",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5358:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/justdial/ThokWaliShop/Thok-wali-Shop/src/components/sales/SellProductForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/justdial/ThokWaliShop/Thok-wali-Shop/src/components/sales/SellProductForm.tsx","default")},6122:(e,t,r)=>{Promise.resolve().then(r.bind(r,5358))},6290:(e,t,r)=>{Promise.resolve().then(r.bind(r,3614))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,794,658,170,583],()=>r(4896));module.exports=s})();